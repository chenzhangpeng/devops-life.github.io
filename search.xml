<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Mysql删除大量数据]]></title>
      <url>http://yoursite.com/2016/06/03/mysql-delete-large-data/</url>
      <content type="html"><![CDATA[<h1 id="mysql删除原理及用法"><a href="#mysql删除原理及用法" class="headerlink" title="mysql删除原理及用法"></a>mysql删除原理及用法</h1><p>通过终端<code>help delete</code>，查询<strong>delete</strong>的用法及注意事项</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; help delete;</span><br><span class="line">Name: &apos;DELETE&apos;</span><br><span class="line">Description:</span><br><span class="line">Syntax:</span><br><span class="line">Single-table syntax:</span><br><span class="line"></span><br><span class="line">DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM tbl_name</span><br><span class="line">    [WHERE where_condition]</span><br><span class="line">    [ORDER BY ...]</span><br><span class="line">    [LIMIT row_count]</span><br><span class="line"></span><br><span class="line">Multiple-table syntax:</span><br><span class="line"></span><br><span class="line">DELETE [LOW_PRIORITY] [QUICK] [IGNORE]</span><br><span class="line">    tbl_name[.*] [, tbl_name[.*]] ...</span><br><span class="line">    FROM table_references</span><br><span class="line">    [WHERE where_condition]</span><br><span class="line"></span><br><span class="line">Or:</span><br><span class="line"></span><br><span class="line">DELETE [LOW_PRIORITY] [QUICK] [IGNORE]</span><br><span class="line">    FROM tbl_name[.*] [, tbl_name[.*]] ...</span><br><span class="line">    USING table_references</span><br><span class="line">    [WHERE where_condition]</span><br><span class="line"></span><br><span class="line">For the single-table syntax, the DELETE statement deletes rows from</span><br><span class="line">tbl_name and returns a count of the number of deleted rows. This count</span><br><span class="line">can be obtained by calling the ROW_COUNT() function (see</span><br><span class="line">http://dev.mysql.com/doc/refman/5.5/en/information-functions.html). The</span><br><span class="line">WHERE clause, if given, specifies the conditions that identify which</span><br><span class="line">rows to delete. With no WHERE clause, all rows are deleted. If the</span><br><span class="line">ORDER BY clause is specified, the rows are deleted in the order that is</span><br><span class="line">specified. The LIMIT clause places a limit on the number of rows that</span><br><span class="line">can be deleted.</span><br><span class="line"></span><br><span class="line">For the multiple-table syntax, DELETE deletes from each tbl_name the</span><br><span class="line">rows that satisfy the conditions. In this case, ORDER BY and LIMIT</span><br><span class="line">cannot be used.</span><br><span class="line"></span><br><span class="line">where_condition is an expression that evaluates to true for each row to</span><br><span class="line">be deleted. It is specified as described in</span><br><span class="line">http://dev.mysql.com/doc/refman/5.5/en/select.html.</span><br><span class="line"></span><br><span class="line">Currently, you cannot delete from a table and select from the same</span><br><span class="line">table in a subquery.</span><br><span class="line"></span><br><span class="line">You need the DELETE privilege on a table to delete rows from it. You</span><br><span class="line">need only the SELECT privilege for any columns that are only read, such</span><br><span class="line">as those named in the WHERE clause.</span><br><span class="line"></span><br><span class="line">As stated, a DELETE statement with no WHERE clause deletes all rows. A</span><br><span class="line">faster way to do this, when you do not need to know the number of</span><br><span class="line">deleted rows, is to use TRUNCATE TABLE. However, within a transaction</span><br><span class="line">or if you have a lock on the table, TRUNCATE TABLE cannot be used</span><br><span class="line">whereas DELETE can. See [HELP TRUNCATE TABLE], and [HELP LOCK].</span><br><span class="line"></span><br><span class="line">URL: http://dev.mysql.com/doc/refman/5.5/en/delete.html</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>DELETE 语句支持以下修饰符:</p>
<blockquote>
<ul>
<li>LOW_PRIORITY，如果您指定LOW_PRIORITY,则DELETE的执行被延迟,直到没有其它客户端读取本表时再执行。</li>
<li>QUICK，对于MyISAM表,如果您使用QUICK关键词,则在删除过程中,存储引擎不会合并索引端结点,这样可 以加快部分种类的删除操作的速度。</li>
<li>IGNORE，在删除行的过程中,IGNORE关键词会使MySQL忽略所有的错误。</li>
</ul>
</blockquote>
<p>DELETE 注意事项</p>
<blockquote>
<ul>
<li>DELETE删除数据时，如果没有加WHERE条件，则全部删除表数据，相当于<code>truncate table</code>。</li>
<li>删除数据时调用<code>ROW_COUNT()</code>函数返回删除数据。</li>
<li>删除时加入<code>ORDER BY</code>，则删除顺序被指定。</li>
<li>删除时加入<code>LIMIT</code>，则删除数量被指定。</li>
<li>多表删除数据时，<code>ORDER BY</code> 和 <code>LIMIT</code>不能使用。</li>
<li>当删除表数据时，不能同时对表做子查询。</li>
<li>删除表数据需要<code>DELETE</code>权限，如果加了<code>WHERE</code>条件，也需要<code>SELECT</code>权限。</li>
<li>在一个事务中或者表加锁时，<code>TRUNCATE TABLE</code>不能使用但是<code>DELETE</code>能使用。</li>
</ul>
</blockquote>
<h1 id="删除大量数据注意事项"><a href="#删除大量数据注意事项" class="headerlink" title="删除大量数据注意事项"></a>删除大量数据注意事项</h1><p>在生产环境中，删除大量数据，会消耗太多的IO资源，会造成一些不良现象主从延时、数据文件无法收缩、锁表等。做大量数据删除时，请注意以下事项：</p>
<ol>
<li><strong>批量删除</strong>，这样往往可以工作得更快，你可能需要在每次批量删除前sleep一段时间，控制删除的频率，这样的目的是减少对生产系统的IO冲击，把符合平均分布，避免从库滞后太多；</li>
<li>按照<strong>主键</strong>的序列分批分次，或者基于时间分批分次。</li>
<li>基于硬件的性能，每批删除的记录数，可以选择几百到几千到几万的数据量，但不要太大，MySQL很难同时处理好大事务和随机小事务；</li>
<li>如果要删除大部分数据，那么可以考虑的方式是，创建一个新表，insert要保留的数据，然后切换表；</li>
<li>对于大表(InnoDB)删除大量数据，如果是一个大的事务，中止删除数据的操作可能需要几倍的时间用于回滚，这样会导致严重的IO瓶颈，而批量删除可以让我们的回滚恢复要快得多。</li>
<li>需要留意空间的释放，选择<strong>独立表空间</strong>会更有利于释放空间。</li>
</ol>
<h1 id="删除实战"><a href="#删除实战" class="headerlink" title="删除实战"></a>删除实战</h1><p>通过写存储过程的方式去删除数据，附上代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER //</span><br><span class="line">CREATE PROCEDURE delete_large() </span><br><span class="line">BEGIN</span><br><span class="line">REPEAT</span><br><span class="line">	DELETE from legou_home_order where create_time&lt;1451577600 LIMIT 1000;</span><br><span class="line">UNTIL ROW_COUNT()=0 </span><br><span class="line">END REPEAT;</span><br><span class="line">END //</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<p>通过mysql命令行执行<code>call delete_large()</code>，如果执行时间过久可以创建event执行</p>
<p>mysql命令行查询存储过程的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show procedure status\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">                  Db: Db</span><br><span class="line">                Name: delete_large</span><br><span class="line">                Type: PROCEDURE</span><br><span class="line">             Definer: root@%</span><br><span class="line">            Modified: 2016-06-03 11:39:45</span><br><span class="line">             Created: 2016-06-03 11:39:45</span><br><span class="line">       Security_type: DEFINER</span><br><span class="line">             Comment: </span><br><span class="line">character_set_client: utf8</span><br><span class="line">collation_connection: utf8_general_ci</span><br><span class="line">  Database Collation: utf8_general_ci</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>查看存储过程创建语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">show create procedure delete_large\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">           Procedure: delete_large</span><br><span class="line">            sql_mode: </span><br><span class="line">    Create Procedure: CREATE DEFINER=`root`@`%` PROCEDURE `delete_large`()</span><br><span class="line">BEGIN</span><br><span class="line">        REPEAT</span><br><span class="line">        DELETE from legou_home_order where create_time&lt;1451577600 LIMIT 1000;</span><br><span class="line">        UNTIL ROW_COUNT()=0 END REPEAT;</span><br><span class="line">END</span><br><span class="line">character_set_client: utf8</span><br><span class="line">collation_connection: utf8_general_ci</span><br><span class="line">  Database Collation: utf8_general_ci</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[svn规范]]></title>
      <url>http://yoursite.com/2016/06/02/svn-standard/</url>
      <content type="html"><![CDATA[<h1 id="Svn目录规划"><a href="#Svn目录规划" class="headerlink" title="Svn目录规划"></a>Svn目录规划</h1><p>svn目录结构如下</p>
<blockquote>
<p>最好是一个项目一个Svn库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Svn库</span><br><span class="line">│-tags(发布)  </span><br><span class="line"></span><br><span class="line">│ │-release_1.0(copy from trunk)</span><br><span class="line"></span><br><span class="line">│ │-bugfix_release_1.0</span><br><span class="line"></span><br><span class="line">│-trunk(主版本)</span><br><span class="line"></span><br><span class="line">│ │-项目文件</span><br><span class="line"></span><br><span class="line">│-branches(分支)</span><br><span class="line"></span><br><span class="line">│ │-bugfix_1.0(copy from tags/release_1.0)</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>开发完毕，代码冻结，基于已经冻结的trunk，为release_1.0打tag，trunk继续新版本开发。</li>
<li>如果发现1.0有bug，需要修改，则基于release_1.0的tag做branch。</li>
<li>在branch进行bugfix_1.0 bug修复，当bug修复完成基于bugfix_1.0做bugfix_release_1.0。</li>
<li>根据需要选择性的把bugfix_1.0这个分支merge回trunk。</li>
</ul>
</blockquote>
<a id="more"></a>
<h1 id="Svn使用规范"><a href="#Svn使用规范" class="headerlink" title="Svn使用规范"></a>Svn使用规范</h1><h2 id="日常更新"><a href="#日常更新" class="headerlink" title="日常更新"></a>日常更新</h2><p>在Svn的日常更新中做到如下要求：</p>
<ul>
<li>每日进行开发工作之前必须更新代码，下班时提交代码。</li>
<li>各员工需牢记各自的账户和密码，一定不得向他人透漏，严禁使用他人账户进行Svn各项操作</li>
<li>每次提交<strong>必须</strong>填写注释，注释不能少于5个中文字符，注释不能毫无意义，要讲明白本次提交的问题。</li>
<li>文件提交前必须先update代码再commit,如果遇到冲突,严禁删除原版本后直接上传新版本</li>
<li>文件提交前必须检查是否有语法错误,php文件要使用<code>php -l [文件名]</code>通过检测</li>
<li>提前宣布修改计划。当你计划进行修改，需要影响到SVN里的许多文件时，先通过邮件或者当面通知其他开发者<br>例如，修改底层数据库模块时，有可能影响到业务逻辑层调用数据库模块的地方。这样其他开发者会有准备，也会对修改提出意见和建议</li>
<li><strong>原子性</strong>提交代码(即一个小功能提交一次)</li>
<li><strong>禁止</strong>使用锁定功能</li>
<li>SVN管理员需对SVN的所有项目定期备份</li>
</ul>
<h2 id="注释提交说明"><a href="#注释提交说明" class="headerlink" title="注释提交说明"></a>注释提交说明</h2><p>Svn提交注释填写标识说明：</p>
<ul>
<li>*表示更新功能</li>
<li>+表示增加文件或功能</li>
<li>-表示删除文件或功能</li>
<li>b表示修正了具体的某个bug</li>
</ul>
<h1 id="在线手册"><a href="#在线手册" class="headerlink" title="在线手册"></a>在线手册</h1><ul>
<li>服务端<a href="http://svndoc.iusesvn.com/svnbook/1.4/" target="_blank" rel="external">Subversion中文手册</a></li>
<li>windows客户端<a href="http://svndoc.iusesvn.com/tsvn/1.5/" target="_blank" rel="external">TortoiseSVN中文手册</a></li>
<li>Mac客户端<a href="http://www.zennaware.com/cornerstone/" target="_blank" rel="external">Cornerstone官网</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Github]]></title>
      <url>http://yoursite.com/2016/06/02/github/</url>
      <content type="html"><![CDATA[<h1 id="Github"><a href="#Github" class="headerlink" title="Github"></a><center>Github</center></h1><h1 id="注册帐号"><a href="#注册帐号" class="headerlink" title="注册帐号"></a>注册帐号</h1><p>输入<a href="https://github.com" target="_blank" rel="external">Github</a>网址，注册帐号过程省略</p>
<h1 id="新建repositories"><a href="#新建repositories" class="headerlink" title="新建repositories"></a>新建repositories</h1><p>1.第一步<br><img src="http://ww1.sinaimg.cn/large/9e2b2ccdgw1f4gome96w6j21kw0gtwib.jpg" alt=""></p>
<p>2.第二步<br><img src="http://ww1.sinaimg.cn/large/9e2b2ccdgw1f4goq2sefij215q0wedkl.jpg" alt=""></p>
<blockquote>
<p>Owner 选择你的your_username<br>Repository name your_username.github.io,<strong>your_username必须与owner选择的your_username一样</strong></p>
</blockquote>
<a id="more"></a>
<h1 id="本地连接远程仓库"><a href="#本地连接远程仓库" class="headerlink" title="本地连接远程仓库"></a>本地连接远程仓库</h1><h2 id="https方式"><a href="#https方式" class="headerlink" title="https方式"></a>https方式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;# your_repo&quot; &gt;&gt; README.md</span><br><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin https://github.com/devops-life/your_repo.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输入的用户信息为github帐号和密码</p>
</blockquote>
<h2 id="ssh方式"><a href="#ssh方式" class="headerlink" title="ssh方式"></a>ssh方式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;# your_repo&quot; &gt;&gt; README.md</span><br><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin git@github.com:devops-life/your_repo.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<blockquote>
<p>需要新建key,步骤参考<a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/" target="_blank" rel="external">官网教程</a></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hexo试用]]></title>
      <url>http://yoursite.com/2016/06/01/hexo/</url>
      <content type="html"><![CDATA[<h1 id="什么是Hexo"><a href="#什么是Hexo" class="headerlink" title="什么是Hexo?"></a>什么是Hexo?</h1><blockquote>
<p><a href="https://hexo.io/zh-cn/" target="_blank" rel="external">Hexo</a>是一个快速、简洁且高效的博客框架。Hexo 使用 <a href="http://wowubuntu.com/markdown/" target="_blank" rel="external">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
</blockquote>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p><img src="http://ww1.sinaimg.cn/large/9e2b2ccdgw1f4gnyxvz0xj20ex0ddwgy.jpg" alt=""></p>
<blockquote>
<p>针对hexo使用<a href="http://naotu.baidu.com/" target="_blank" rel="external">在线脑图工具</a>画出大概思路，导出图片和makedown格式文件，图片上传到<a href="http://weibotuchuang.sinaapp.com" target="_blank" rel="external">微博图床</a>或者<a href="https://www.qiniu.com" target="_blank" rel="external">七牛云存储</a></p>
</blockquote>
<a id="more"></a>
<h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><p>安装 Hexo 相当简单。然而在安装前，您必须检查电脑中是否已安装下列应用程序：</p>
<ul>
<li><a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js</a></li>
<li><a href="https://git-scm.com" target="_blank" rel="external">Git</a></li>
</ul>
<p>如果您的电脑中已经安装上述必备程序，那么恭喜您！接下来只需要使用 npm 即可完成 Hexo 的安装。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><h3 id="什么是Git"><a href="#什么是Git" class="headerlink" title="什么是Git"></a>什么是Git</h3><blockquote>
<p>Git是一款免费、开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目,学习使用可参考<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">廖雪峰-Git教程</a></p>
<h3 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h3><p>Mac中使用<a href="http://brew.sh/index_zh-cn.html" target="_blank" rel="external">Homebrew</a>安装,如果未安装Homebrew,请先安装</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span><br></pre></td></tr></table></figure>
<p>安装Git</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo brew install git</span><br></pre></td></tr></table></figure>
<p>shell中查看安装版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure>
<h2 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h2><h3 id="什么是Node-js"><a href="#什么是Node-js" class="headerlink" title="什么是Node.js"></a>什么是Node.js</h3><blockquote>
<p>Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。Node.js 使用了一个事件驱动、非阻塞式 I/O 的模型，使其轻量又高效。Node.js 的包管理器 npm，是全球最大的开源库生态系统。</p>
</blockquote>
<h3 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h3><p>Node.js的安装通过包管理器<a href="http://nodejs.cn/download/package-manager/" target="_blank" rel="external">安装</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install node</span><br></pre></td></tr></table></figure>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p>所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<h1 id="Hexo初始化"><a href="#Hexo初始化" class="headerlink" title="Hexo初始化"></a>Hexo初始化</h1><p>终端中用<a href="http://man.linuxde.net/mkdir" target="_blank" rel="external">mkdir</a>创建个人目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir blog</span><br></pre></td></tr></table></figure>
<p>开始初始化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure>
<p>切换到<strong>blog</strong>目录下<code>cd blog</code>,安装依赖包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>本地启动测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server 可简写hexo s</span><br></pre></td></tr></table></figure>
<p>打开浏览器输入<code>http://localhost:4000/</code>查看效果</p>
<h1 id="Hexo基础用法"><a href="#Hexo基础用法" class="headerlink" title="Hexo基础用法"></a>Hexo基础用法</h1><p>Hexo的<a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="external">基础用法</a></p>
<h2 id="init"><a href="#init" class="headerlink" title="init"></a>init</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init [folder]</span><br></pre></td></tr></table></figure>
<p>新建一个网站。如果没有设置folder,Hexo 默认在目前的文件夹建立网站。</p>
<h2 id="new"><a href="#new" class="headerlink" title="new"></a>new</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure>
<p>新建一篇文章。如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。如果标题包含空格的话，请使用引号括起来。</p>
<h2 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate 可简写 hexo g</span><br></pre></td></tr></table></figure>
<p>生成静态文件。</p>
<table>
<thead>
<tr>
<th>选项</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-d, –deploy</td>
<td style="text-align:left">文件生成后立即部署网站</td>
</tr>
<tr>
<td>-w, –watch</td>
<td style="text-align:left">监视文件变动</td>
</tr>
</tbody>
</table>
<h2 id="publish"><a href="#publish" class="headerlink" title="publish"></a>publish</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo publish [layout] &lt;filename&gt;</span><br></pre></td></tr></table></figure>
<p>发表草稿</p>
<h2 id="server"><a href="#server" class="headerlink" title="server"></a>server</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server 可简写 hexo s</span><br></pre></td></tr></table></figure>
<p>启动服务器。默认情况下，访问网址为： <a href="http://localhost:4000/。" target="_blank" rel="external">http://localhost:4000/。</a></p>
<table>
<thead>
<tr>
<th>选项</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-p, –port</td>
<td style="text-align:left">重设端口</td>
</tr>
<tr>
<td>-s, –static</td>
<td style="text-align:left">只使用静态文件</td>
</tr>
<tr>
<td>-l, –log</td>
<td style="text-align:left">启动日记记录，使用覆盖记录格式</td>
</tr>
</tbody>
</table>
<h2 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
<p>部署网站。</p>
<table>
<thead>
<tr>
<th>选项</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-g, –generate</td>
<td style="text-align:left">部署之前预先生成静态文件</td>
</tr>
</tbody>
</table>
<h2 id="render"><a href="#render" class="headerlink" title="render"></a>render</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo render &lt;file1&gt; [file2] ...</span><br></pre></td></tr></table></figure>
<p>渲染文件。</p>
<table>
<thead>
<tr>
<th>选项</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>-o, –output</td>
<td style="text-align:left">设置输出路径</td>
</tr>
</tbody>
</table>
<h2 id="migrate"><a href="#migrate" class="headerlink" title="migrate"></a>migrate</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo migrate &lt;type&gt;</span><br></pre></td></tr></table></figure>
<p>从其他博客系统 迁移内容。</p>
<h2 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean 可简写 hexo c</span><br></pre></td></tr></table></figure>
<p>清除缓存文件 (db.json) 和已生成的静态文件 (public)。</p>
<h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo list &lt;type&gt;</span><br></pre></td></tr></table></figure>
<p>列出网站资料</p>
<h2 id="version"><a href="#version" class="headerlink" title="version"></a>version</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo version</span><br></pre></td></tr></table></figure>
<p>显示Hexo版本。</p>
<h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><h3 id="安全模式"><a href="#安全模式" class="headerlink" title="安全模式"></a>安全模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo --safe</span><br></pre></td></tr></table></figure>
<p>在安全模式下，不会载入插件和脚本。当您在安装新插件遭遇问题时，可以尝试以安全模式重新执行。</p>
<h3 id="调试模式"><a href="#调试模式" class="headerlink" title="调试模式"></a>调试模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo --debug</span><br></pre></td></tr></table></figure>
<p>在终端中显示调试信息并记录到 debug.log。当您碰到问题时，可以尝试用调试模式重新执行一次，并 提交调试信息到 GitHub。</p>
<h3 id="简洁模式"><a href="#简洁模式" class="headerlink" title="简洁模式"></a>简洁模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo --silent</span><br></pre></td></tr></table></figure>
<p>隐藏终端信息。</p>
<h3 id="自定义配置文件的路径"><a href="#自定义配置文件的路径" class="headerlink" title="自定义配置文件的路径"></a>自定义配置文件的路径</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo --config custom.yml</span><br></pre></td></tr></table></figure>
<p>自定义配置文件的路径，执行后将不再使用 _config.yml。</p>
<h3 id="显示草稿"><a href="#显示草稿" class="headerlink" title="显示草稿"></a>显示草稿</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo --draft</span><br></pre></td></tr></table></figure>
<p>显示 source/_drafts 文件夹中的草稿文章。</p>
<h3 id="自定义-CWD"><a href="#自定义-CWD" class="headerlink" title="自定义 CWD"></a>自定义 CWD</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo --cwd /path/to/cwd</span><br></pre></td></tr></table></figure>
<p>自定义当前工作目录（Current working directory）的路径。</p>
<h1 id="Hexo常用操作"><a href="#Hexo常用操作" class="headerlink" title="Hexo常用操作"></a>Hexo常用操作</h1><ol>
<li><code>hexo clean</code> 清除缓存文件</li>
<li><code>hexo g</code> 生成静态文件</li>
<li><code>hexo s --debug</code>或者<code>hexo s</code> 开启本地调试</li>
<li><code>hexo d</code> 同步代码到托管</li>
</ol>
<h1 id="Hexo配置文件-config-yml"><a href="#Hexo配置文件-config-yml" class="headerlink" title="Hexo配置文件_config.yml"></a>Hexo配置文件_config.yml</h1><p>可以在<a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="external">_config.yml</a>修改<em>站点配置</em>。用<a href="http://www.yaml.org" target="_blank" rel="external">YAML</a>编写配置，Ps：<a href="http://jyaml.sourceforge.net/tutorial.html?cm_mc_uid=63653149536814587890027&amp;cm_mc_sid_50200000=1464772210" target="_blank" rel="external">YAML基础语法</a></p>
<blockquote>
<p>YAML是一种人们可以轻松阅读的数据序列化格式，并且它非常适合对动态编程语言中使用的数据类型进行编码。YAML是YAML Ain’t Markup Language简写，和GNU(“GNU’s Not Unix!”)一样，YAML是一个递归着说“不”的名字。不同的是，GNU对UNIX说不，YAML说不的对象是XML。YAML不是XML。它可以用作数据序列，配置文件，log文件，Internat信息和过滤。</p>
</blockquote>
<p>本人的配置如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"># Hexo Configuration</span><br><span class="line">## Docs: https://hexo.io/docs/configuration.html</span><br><span class="line">## Source: https://github.com/hexojs/hexo/</span><br><span class="line"></span><br><span class="line"># Site</span><br><span class="line">title: 运维•开发•生活</span><br><span class="line">subtitle:</span><br><span class="line">description: 努力未必成功.但放弃必定失败</span><br><span class="line">author: Chen Zhangpeng</span><br><span class="line">language: zh-Hans</span><br><span class="line">timezone:</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;</span><br><span class="line">url: http://yoursite.com</span><br><span class="line">root: /</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line"></span><br><span class="line"># Directory</span><br><span class="line">source_dir: source</span><br><span class="line">public_dir: public</span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads/code</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br><span class="line"></span><br><span class="line"># Writing</span><br><span class="line">new_post_name: :title.md # File name of new posts</span><br><span class="line">default_layout: post</span><br><span class="line">titlecase: false # Transform title into titlecase</span><br><span class="line">external_link: true # Open external links in new tab</span><br><span class="line">filename_case: 0</span><br><span class="line">render_drafts: false</span><br><span class="line">post_asset_folder: false</span><br><span class="line">relative_link: false</span><br><span class="line">future: true</span><br><span class="line">highlight:</span><br><span class="line">  enable: true</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: false</span><br><span class="line">  tab_replace:</span><br><span class="line"></span><br><span class="line"># Category &amp; Tag</span><br><span class="line">default_category: uncategorized</span><br><span class="line">category_map:</span><br><span class="line">tag_map:</span><br><span class="line"></span><br><span class="line"># Date / Time format</span><br><span class="line">## Hexo uses Moment.js to parse and display date</span><br><span class="line">## You can customize the date format as defined in</span><br><span class="line">## http://momentjs.com/docs/#/displaying/format/</span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line"></span><br><span class="line"># Pagination</span><br><span class="line">## Set per_page to 0 to disable pagination</span><br><span class="line">per_page: 10</span><br><span class="line">pagination_dir: page</span><br><span class="line"></span><br><span class="line"># Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">theme: next</span><br><span class="line">scheme: Pisces</span><br><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:devops-life/devops-life.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[next主题]]></title>
      <url>http://yoursite.com/2016/06/01/hexo-next/</url>
      <content type="html"><![CDATA[<h1 id="安装NexT"><a href="#安装NexT" class="headerlink" title="安装NexT"></a>安装NexT</h1><p>Hexo 安装主题的方式非常简单，只需要将主题文件拷贝至站点目录的 themes 目录下， 然后修改下<em>配置文件</em>即可。具体到<a href="http://theme-next.iissnan.com" target="_blank" rel="external">NexT</a>来说，安装步骤如下。</p>
<h2 id="下载主题"><a href="#下载主题" class="headerlink" title="下载主题"></a>下载主题</h2><p>如果你熟悉 Git， 建议你使用 克隆最新版本 的方式，之后的更新可以通过 git pull 来快速更新， 而不用再次下载压缩包替换。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd your-hexo-site</span><br><span class="line">git clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果你对 Git 感兴趣，可以通过《Pro Git》这本书来学习。你可以访问一个<a href="http://iissnan.com/progit/" target="_blank" rel="external">在线版本（第一版)</a>]</p>
</blockquote>
<h2 id="启用主题"><a href="#启用主题" class="headerlink" title="启用主题"></a>启用主题</h2><p>与所有 Hexo 主题启用的模式一样。 当 克隆/下载 完成后，打开 站点配置文件， 找到 theme 字段，并将其值更改为 next。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="验证主题"><a href="#验证主题" class="headerlink" title="验证主题"></a>验证主题</h2><p>首先启动 Hexo 本地站点，并开启调试模式（即加上 –debug），整个命令是 hexo s –debug。 在服务启动的过程，注意观察命令行输出是否有任何异常信息，如果你碰到问题，这些信息将帮助他人更好的定位错误。 当命令行输出中提示出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>
<p>此时即可使用浏览器访问 <a href="http://localhost:4000，检查站点是否正确运行。" target="_blank" rel="external">http://localhost:4000，检查站点是否正确运行。</a></p>
<blockquote>
<p>当你看到站点的外观与下图所示类似时即说明你已成功安装 NexT 主题。这是 NexT 默认的 Scheme —— Muse</p>
</blockquote>
<p><img src="http://ww4.sinaimg.cn/large/9e2b2ccdgw1f4fvpv0nh4j20lf0bx74y.jpg" alt=""></p>
<p>现在，你已经成功安装并启用了 NexT 主题。下一步我们将要更改一些主题的设定，包括个性化以及集成第三方服务。</p>
]]></content>
    </entry>
    
  
  
</search>
